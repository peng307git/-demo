$.fn.wheeler = function(g) {
    var b = "#474747";
    if (g && g.barcolor) {
        b = g.barcolor
    }
    var m = "rgba(43,43,43,1)";
    if (g && g.scrollcolor) {
        m = g.scrollcolor
    }
    var d = $(this);
    var f = '<div class="clearfix scrollerbox">' + d.html() + "</div>";
    d.html(f);
    var k = d.find(".scrollerbox");
    var l = parseInt(k.css("height").split("px")[0]);   //总高度

    var flength = k.find('ul');
    var albumheight = $('.album').outerHeight() * $('.album').size();//专辑的高度
    var parentMaxHeight = 1;
    for(var i=0; i<flength.size(); i++){
        var maxliheight = flength.eq(i).children().size();
        if( maxliheight > parentMaxHeight){
                parentMaxHeight = maxliheight;
        }
        l = albumheight+parentMaxHeight*32;
    }
    console.log(l);
    var c = d.height();  //videoli的高度
   
    if (c < l) {
        var a = 5;
        d.css({
            position: "relative",
            overflow: "hidden"
        });
        k.css({
            position: "absolute",
            width: "100%",
            top: 0,
            left: 0
        });
        d.append('<div class="barbox"></div>');
        var e = d.find(".barbox");
        e.css({
            position: "absolute",
            background: m,
            width: "10px",
            height: c + "px",
            right: "0px",
            top: 0
        });
        e.append('<div class="bar"></div>');
        var n = parseInt(c * (c / l));
        var j = e.find(".bar");
        j.css({
            position: "absolute",
            top: a,
            right: "0px",
            background: b,
            width: "8px",
            height: n + "px",
            "min-height": "15px",
            "max-height": c + "px",
            "border-radius": "6px",
        });
        // j.hover(function() {
        //     j.css({
        //         opacity: 1
        //     })
        // }, function() {
        //     j.css({
        //         opacity: 0.5
        //     })
        // });
        var o = parseInt(j.css("height").split("px")[0]);
        var p = c - o - a;
        // d.hover(function() {
        //     e.animate({
        //         right: "0px"
        //     }, 200)
        // }, function() {
        //     e.animate({
        //         right: "-15px"
        //     }, 200)
        // });
        // d.on("mousewheel DOMMouseScroll", function(s) {
        //     s.preventDefault();
        //     var t = (s.originalEvent.wheelDelta && (s.originalEvent.wheelDelta > 0 ? 1 : -1)) || (s.originalEvent.detail && (s.originalEvent.detail > 0 ? -1 : 1));
        //     var r = (s.originalEvent.wheelDelta && (s.originalEvent.wheelDelta / 40)) || (s.originalEvent.detail && (s.originalEvent.detail / 1));
        //     var q = parseInt(j.css("top").split("px")[0]);
        //     if (s.originalEvent.wheelDelta) {
        //         i(q - r)
        //     } else {
        //         if (s.originalEvent.detail) {
        //             i(q + r)
        //         }
        //     }
        // });
        h(j);
        function h(t) {
            var q = false;
            var s, r;
            var t = $(document).find(t);
            t.mousedown(function(u) {
                q = true;
                s = u.pageX - parseInt($(this).css("left"));
                r = u.pageY - parseInt($(this).css("top"));
            });
            $(document).mousemove(function(v) {
                if (q) {
                    var u = v.pageX - s;
                    var w = v.pageY - r;
                    i(w)
                }
            }).mouseup(function() {
                q = false
            })
        }
        // function i(q) {
        //     var r = q;
        //     if (q <= a) {
        //         r = a
        //     } else {
        //         if (r >= p) {
        //             r = p
        //         }
        //     }
        //     j.css("top", r);
        //     k.css("top", -(r * (l / c)  - 7 ))
        // }
    }
}
;
